<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>梅花心易卜卦與解卦系統</title>
    <style>
        /* wuxing2.html CSS */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Microsoft YaHei", "Heiti TC", sans-serif;
        }
        
        body {
            background-color: #f9f5eb;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #8e7d5b 0%, #c9ad7a 100%);
            border-radius: 10px;
            color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .description {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: #f0e6d2;
        }
        
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .divination-section {
            flex: 1;
            min-width: 300px;
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        .result-section {
            flex: 2;
            min-width: 300px;
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }
        
        h2 {
            color: #8e7d5b;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e8dbc5;
        }
        
        h3 {
            color: #a94438;
            margin-top: 15px;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #666;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        button {
            display: block;
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #8e7d5b 0%, #c9ad7a 100%);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        button:hover {
            background: linear-gradient(135deg, #7a6b4e 0%, #b09868 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .random-btn {
            background: linear-gradient(135deg, #6b7d8e 0%, #7a9cc9 100%);
        }
        
        .random-btn:hover {
            background: linear-gradient(135deg, #5b6b7a 0%, #6888b0 100%);
        }
        
        .result-content {
            padding: 20px;
            background-color: #f8f4e9;
            border-radius: 8px;
            min-height: 200px;
        }
        
        .combination {
            font-weight: bold;
            color: #8e7d5b;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .interpretation {
            font-size: 1.1rem;
            line-height: 1.8;
            padding: 15px;
            background-color: #fff;
            border-left: 4px solid #c9ad7a;
            border-radius: 4px;
            white-space: pre-line;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #8e7d5b;
        }
        
        .gua-info {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .gua-item {
            flex: 1;
            min-width: 150px;
            text-align: center;
            padding: 15px;
            margin: 10px;
            background: #f3eee2;
            border-radius: 8px;
        }
        
        .gua-title {
            font-weight: bold;
            color: #8e7d5b;
            margin-bottom: 10px;
        }
        
        .gua-value {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #888;
            font-size: 0.9rem;
        }
        
        .method-selector {
            margin-bottom: 20px;
        }
        
        .method-tab {
            display: none;
        }
        
        .method-tab.active {
            display: block;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #e8dbc5;
        }
        
        .tab-btn {
            padding: 10px 15px;
            background: #f3eee2;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            margin-right: 5px;
            font-weight: bold;
            color: #8e7d5b;
        }
        
        .tab-btn.active {
            background: #8e7d5b;
            color: white;
        }
        
        /* gua.html CSS */
        .hexagram-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        .hexagram-group {
            text-align: center;
        }
        .hexagram-lines {
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .hexagram-line {
            width: 100px;
            height: 8px;
            margin: 4px 0;
            background: #2f2f2f;
        }
        .yin-line {
            background: linear-gradient(to right, #2f2f2f 40%, transparent 40%, transparent 60%, #2f2f2f 60%);
        }
        .moving-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #a94438;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #d9c2a6;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f3eee2;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .gua-info {
                flex-direction: column;
            }
            .tab-buttons {
                flex-wrap: wrap;
            }
            .tab-btn {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>梅花心易卜卦與解卦系統</h1>
        <p class="description">根據五行生克關係，解析卦象的吉凶變化</p>
    </header>
    
    <div class="container">
        <section class="divination-section">
            <h2>卜卦區</h2>
            
            <div class="method-selector">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="direct">直接取卦</button>
                    <button class="tab-btn" data-tab="time">時間取卦</button>
                    <button class="tab-btn" data-tab="number">數字取卦</button>
                </div>
                
                <div class="method-tab active" id="direct-tab">
                    <div class="input-group">
                        <label for="shang-gua">上卦（1-8）：</label>
                        <select id="shang-gua">
                            <option value="1">1 - 乾卦 (金)</option>
                            <option value="2">2 - 兌卦 (金)</option>
                            <option value="3">3 - 離卦 (火)</option>
                            <option value="4">4 - 震卦 (木)</option>
                            <option value="5">5 - 巽卦 (木)</option>
                            <option value="6">6 - 坎卦 (水)</option>
                            <option value="7">7 - 艮卦 (土)</option>
                            <option value="8">8 - 坤卦 (土)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="xia-gua">下卦（1-8）：</label>
                        <select id="xia-gua">
                            <option value="1">1 - 乾卦 (金)</option>
                            <option value="2">2 - 兌卦 (金)</option>
                            <option value="3">3 - 離卦 (火)</option>
                            <option value="4">4 - 震卦 (木)</option>
                            <option value="5">5 - 巽卦 (木)</option>
                            <option value="6">6 - 坎卦 (水)</option>
                            <option value="7">7 - 艮卦 (土)</option>
                            <option value="8">8 - 坤卦 (土)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="moving-yao">變爻（1-6）：</label>
                        <select id="moving-yao">
                            <option value="1">1 - 初爻</option>
                            <option value="2">2 - 二爻</option>
                            <option value="3">3 - 三爻</option>
                            <option value="4">4 - 四爻</option>
                            <option value="5">5 - 五爻</option>
                            <option value="6">6 - 上爻</option>
                        </select>
                    </div>
                </div>
                
                <div class="method-tab" id="time-tab">
                    <div class="input-group">
                        <label for="year">年份：</label>
                        <input type="number" id="year" min="1900" max="2100" value="2025">
                    </div>
                    
                    <div class="input-group">
                        <label for="month">月份：</label>
                        <input type="number" id="month" min="1" max="12" value="9">
                    </div>
                    
                    <div class="input-group">
                        <label for="day">日期：</label>
                        <input type="number" id="day" min="1" max="31" value="4">
                    </div>
                    
                    <div class="input-group">
                        <label for="hour">時辰（0-23）：</label>
                        <input type="number" id="hour" min="0" max="23" value="1">
                    </div>
                    
                    <button id="use-current-time">使用當前時間</button>
                </div>
                
                <div class="method-tab" id="number-tab">
                    <div class="input-group">
                        <label for="number1">第一個數字（1-1000）：</label>
                        <input type="number" id="number1" min="1" max="1000" value="35">
                    </div>
                    
                    <div class="input-group">
                        <label for="number2">第二個數字（1-1000）：</label>
                        <input type="number" id="number2" min="1" max="1000" value="48">
                    </div>
                    
                    <div class="input-group">
                        <label for="number3">第三個數字（1-6）：</label>
                        <input type="number" id="number3" min="1" max="6" value="6">
                    </div>
                </div>
            </div>
            
            <button id="calculate-btn">開始卜卦</button>
            <button id="random-btn" class="random-btn">隨機卜卦</button>
        </section>
        
        <section class="result-section">
            <h2>解卦結果</h2>
            <div class="result-content">
                <div class="loading" id="result-loading">請選擇取卦方式並點擊"開始卜卦"按鈕獲取結果</div>
                <div id="result" style="display: none;">
                    <h3>卦象顯示</h3>
                    <div class="hexagram-container">
                        <div class="hexagram-group">
                            <div class="gua-title">本卦</div>
                            <div class="hexagram-lines" id="mainHexagram"></div>
                            <div class="gua-value" id="ben-gua"></div>
                        </div>
                        <div class="hexagram-group">
                            <div class="gua-title">互卦</div>
                            <div class="hexagram-lines" id="mutualHexagram"></div>
                            <div class="gua-value" id="hu-gua"></div>
                        </div>
                        <div class="hexagram-group">
                            <div class="gua-title">變卦</div>
                            <div class="hexagram-lines" id="changedHexagram"></div>
                            <div class="gua-value" id="bian-gua"></div>
                        </div>
                    </div>
                    
                    <h3>五行生克分析表</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>卦象</th>
                                    <th>五行屬性</th>
                                    <th>生克關係</th>
                                    <th>吉凶判斷</th>
                                    <th>旺相休囚</th>
                                </tr>
                            </thead>
                            <tbody id="fiveElementTable"></tbody>
                        </table>
                    </div>
                    
                    <h3>卦象深度解讀</h3>
                    <div class="interpretation" id="interpretation"></div>
                    <p id="guaCi"></p>
                    
                    <h3>五行生克詳解</h3>
                    <div id="fiveElements"></div>
                    
                    <h3>旺相休囚死分析</h3>
                    <div id="seasonalAnalysis"></div>
                    
                    <h3>動爻分析</h3>
                    <div id="movingYao"></div>
                    
                    <h3>卦象組合</h3>
                    <div id="guaCombination"></div>
                    
                    <h3>應事範圍</h3>
                    <div id="application"></div>
                    
                    <h3>處世之道</h3>
                    <div id="suggestion"></div>
                    
                    <h3>應期分析</h3>
                    <div id="prediction"></div>
                </div>
            </div>
        </section>
    </div>
    
    <div id="history-section" class="divination-section hidden">
        <h2>卜卦歷史</h2>
        <div id="historyList"></div>
        <button id="clear-history-btn">清除歷史</button>
    </div>
    
    <button id="show-history-btn" style="width: 200px; margin: 20px auto;">查看歷史紀錄</button>
    
    <footer>
        <p>梅花心易卜卦程式 &copy; 2024 - 傳承千年智慧，僅供參考</p>
    </footer>

    <script>
        const guaTable = {
            1: { name: '乾', fiveElement: '金' },
            2: { name: '兌', fiveElement: '金' },
            3: { name: '離', fiveElement: '火' },
            4: { name: '震', fiveElement: '木' },
            5: { name: '巽', fiveElement: '木' },
            6: { name: '坎', fiveElement: '水' },
            7: { name: '艮', fiveElement: '土' },
            8: { name: '坤', fiveElement: '土' }
        };

        const guaNames = ['乾', '兌', '離', '震', '巽', '坎', '艮', '坤'];
        const guaImages = {
            '乾': '天，剛健中正，宜果斷進取，行健不息。',
            '兌': '澤，悅而通達，宜和睦交流，喜悅以成。',
            '離': '火，麗而依附，宜明察慎行，文明以麗。',
            '震': '雷，動而奮發，宜振作有為，震驚百里。',
            '巽': '風，順而入微，宜柔和漸進，隨風而入。',
            '坎': '水，險而深邃，宜謹慎守正，履險如夷。',
            '艮': '山，止而厚重，宜靜觀待機，止於至善。',
            '坤': '地，順而廣博，宜包容謙卑，厚德載物。'
        };
        const guaBinary = ['111', '110', '101', '100', '011', '010', '001', '000'];
        const fiveElements = ['金', '金', '火', '木', '木', '水', '土', '土'];
        const fiveElementRelations = {
            '金': { generates: '水', overcomes: '木', generatedBy: '土', overcomeBy: '火' },
            '木': { generates: '火', overcomes: '土', generatedBy: '水', overcomeBy: '金' },
            '水': { generates: '木', overcomes: '火', generatedBy: '金', overcomeBy: '土' },
            '火': { generates: '土', overcomes: '金', generatedBy: '木', overcomeBy: '水' },
            '土': { generates: '金', overcomes: '水', generatedBy: '火', overcomeBy: '木' }
        };
        const yaoSymbols = ['—', '- -'];
        const seasons = {
            '木': '春季（正月至三月）',
            '火': '夏季（四月至六月）',
            '土': '季末（三、六、九、十二月）',
            '金': '秋季（七月至九月）',
            '水': '冬季（十月至十二月）'
        };

        const guaCiData = {
            '乾上乾下': { name: '乾為天', ci: '元亨利貞，剛健中正，宜自強不息。', yaoCi: ['初九：潛龍勿用，宜潛藏蓄力。', '九二：見龍在田，宜顯露才華。', '九三：君子終日乾乾，宜勤勉不懈。', '九四：或躍在淵，宜審時進退。', '九五：飛龍在天，宜乘勢而為。', '上九：亢龍有悔，宜謙退防過。'] },
            '乾上坎下': { name: '天水訟', ci: '有孚窒惕，宜謹慎爭訟，守正以待。', yaoCi: ['初六：不永所事，宜小事謹慎。', '六二：不克訟，宜退避三舍。', '九三：食舊德，宜安守本分。', '六四：不克訟，宜復正安和。', '九五：訟元吉，宜公正處事。', '上九：或錫之鞶帶，宜謙退勿爭。'] },
            '震上坤下': { name: '雷地豫', ci: '利建侯行師，宜振奮順時，謀定而動。', yaoCi: ['初六：鳴豫凶，宜謹慎勿躁。', '六二：介於石，宜守正不移。', '六三：盱豫悔，宜審慎勿進。', '九四：由豫大有得，宜順勢而為。', '六五：貞疾，宜調養慎行。', '上六：冥豫，宜謙退防過。'] },
            '坤上坤下': { name: '坤為地', ci: '元亨，利牝馬之貞，宜順勢而為，厚德載物。', yaoCi: ['初六：履霜堅冰至，宜謹慎行事。', '六二：直方大，宜正直行事。', '六三：含章可貞，宜潛藏待時。', '六四：括囊無咎，宜謹慎守口。', '六五：黃裳元吉，宜謙和行事。', '上六：龍戰於野，宜謙退防爭。'] },
            '艮上坤下': { name: '山地剝', ci: '不利有攸往，宜靜守待時，謹慎以行。', yaoCi: ['初六：剝床以足，宜謹慎小事。', '六二：剝床以辨，宜穩固根基。', '六三：剝之無咎，宜守正不爭。', '六四：剝床以膚，宜謹防損失。', '六五：貫魚以宮人，宜順勢而為。', '上九：碩果不食，宜謙退守成。'] },
            '坎上坤下': { name: '水地比', ci: '吉，原筮元永貞，宜親比和睦，誠信以行。', yaoCi: ['初六：有孚比之，宜誠信相交。', '六二：比之自內，宜內修德行。', '六三：比之匪人，宜慎選同道。', '六四：外比之，宜廣結善緣。', '九五：顯比，宜公正無私。', '上六：比之無首，宜謹慎行事。'] },
            '巽上坤下': { name: '風地觀', ci: '盥而不薦，宜觀察時機，謹慎以待。', yaoCi: ['初六：童觀，宜謙學觀察。', '六二：窺觀，宜內省慎行。', '六三：觀我生，宜審己進退。', '六四：觀國之光，宜廣學求進。', '九五：觀我生，宜自省修德。', '上九：觀其生，宜高瞻遠矚。'] },
            '離上坤下': { name: '火地晉', ci: '康侯用錫馬，宜進取有為，光明正大。', yaoCi: ['初六：晉如摧如，宜謹慎起步。', '六二：晉如愁如，宜堅守正道。', '六三：眾允悔亡，宜團結進取。', '九四：晉如鼫鼠，宜謹防小人。', '六五：悔亡失得，宜坦然進取。', '上九：晉其角，宜謙退防過。'] },
            '兌上坤下': { name: '澤地萃', ci: '亨，王假有廟，宜團結和睦，聚眾成事。', yaoCi: ['初六：有孚不終，宜誠信團結。', '六二：引吉無咎，宜真誠相交。', '六三：萃如嗟如，宜謹慎求援。', '九四：大吉無咎，宜廣結善緣。', '九五：萃有位，宜公正行事。', '上六：齎咨涕洟，宜靜觀其變。'] },
            '乾上坤下': { name: '天地否', ci: '否之匪人，宜謹慎守正，待時而動。', yaoCi: ['初六：拔茅茹，宜團結謹慎。', '六二：包承，宜謙順待時。', '六三：包羞，宜低調行事。', '九四：有命無咎，宜順勢而為。', '九五：休否，宜積極轉化。', '上九：傾否，宜謹慎終結。'] },
            '兌上乾下': { name: '澤天夬', ci: '揚於王庭，宜果斷行事，謹慎以終。', yaoCi: ['初九：壯於前趾，宜謹慎起步。', '九二：惕號莫夜，宜警醒防患。', '九三：壯於頰，宜謙退慎行。', '九四：臀無膚，宜穩健行事。', '九五：莧陸夬夬，宜果斷中正。', '上六：無號凶，宜謙退防過。'] },
            '離上乾下': { name: '火天大有', ci: '元亨，宜廣納賢才，光明正大。', yaoCi: ['初九：無交害，宜謹慎起步。', '九二：大車以載，宜穩健進取。', '九三：公用亨，宜團結共事。', '九四：匪其彭，宜謹防過盛。', '六五：厥孚交如，宜誠信待人。', '上九：自天祐之，宜謙和守成。'] },
            '震上乾下': { name: '雷天大壯', ci: '利貞，宜剛健守正，謹慎進取。', yaoCi: ['初九：壯於趾，宜謹慎起步。', '九二：貞吉，宜堅守正道。', '九三：小人用壯，宜謙退慎行。', '九四：貞吉悔亡，宜果斷進取。', '六五：喪羊於易，宜謹防損失。', '上六：羝羊觸藩，宜謙退待時。'] },
            '巽上乾下': { name: '風天小畜', ci: '亨，密雲不雨，宜蓄力待時。', yaoCi: ['初九：復自道，宜謹慎回歸。', '九二：牽復，宜團結共進。', '九三：輿說輻，宜謹防紛爭。', '六四：有孚血去，宜誠信行事。', '六五：有孚攣如，宜真誠團結。', '上九：既雨既處，宜謙退守成。'] },
            '坎上乾下': { name: '水天需', ci: '有孚光亨，宜耐心以待，謹慎行事。', yaoCi: ['初九：需於郊，宜靜待時機。', '九二：需於沙，宜謹慎前行。', '九三：需於泥，宜防患未然。', '六四：需於血，宜謹慎脫險。', '九五：需於酒食，宜安享待時。', '上六：入於穴，宜謙退守正。'] },
            '艮上乾下': { name: '山天大畜', ci: '利貞，宜蓄德修身，謹慎進取。', yaoCi: ['初九：有厲利已，宜謹慎止步。', '九二：輿說輻，宜穩健行事。', '九三：良馬逐，宜積極進取。', '六四：童牛之牿，宜謹防初難。', '六五：豶豕之牙，宜和緩行事。', '上九：何天之衢，宜廣開前路。'] },
            '坤上乾下': { name: '地天泰', ci: '小往大來，宜順勢而為，通達和順。', yaoCi: ['初九：拔茅茹，宜團結進取。', '九二：包荒，宜包容廣納。', '九三：無平不陂，宜謹慎持盈。', '六四：翩翩不富，宜謙退待時。', '六五：帝乙歸妹，宜和睦行事。', '上六：城復於隍，宜謹防傾覆。'] },
            '坤上兌下': { name: '地澤臨', ci: '元亨，宜親臨教化，謙和以行。', yaoCi: ['初九：咸臨吉，宜和睦進取。', '九二：咸臨無咎，宜真誠行事。', '六三：甘臨無攸利，宜謹慎勿進。', '六四：至臨無咎，宜親近賢才。', '六五：知臨大君，宜公正行事。', '上六：敦臨吉，宜厚德載物。'] },
            '艮上兌下': { name: '山澤損', ci: '有孚元吉，宜損己利人，謹慎行事。', yaoCi: ['初九：已事遄往，宜速助他人。', '九二：利貞，宜守正勿貪。', '六三：三人行損一人，宜團結共事。', '六四：損其疾，宜謙和待人。', '六五：或益之，宜坦然受助。', '上九：弗損益之，宜謙退守成。'] },
            '坎上兌下': { name: '水澤節', ci: '亨，宜節制有度，謹慎行事。', yaoCi: ['初九：不出戶庭，宜謹慎守靜。', '九二：不出門庭凶，宜積極有為。', '六三：不節若，宜反省節制。', '六四：安節亨，宜順勢而行。', '九五：甘節吉，宜中正行事。', '上六：苦節凶，宜謙退防過。'] },
            '巽上兌下': { name: '風澤中孚', ci: '豚魚吉，宜誠信感化，守正以行。', yaoCi: ['初九：虞吉，宜謹慎起步。', '九二：鳴鶴在陰，宜真誠待人。', '六三：得敵，宜謹防爭執。', '六四：月幾望，宜謙和行事。', '九五：有孚攣如，宜誠信團結。', '上九：翰音登于天，宜謙退防過。'] },
            '震上兌下': { name: '雷澤歸妹', ci: '征凶，宜謹慎感情，順勢而行。', yaoCi: ['初九：歸妹以娣，宜謙順行事。', '九二：眇能視，宜謹慎前行。', '六三：歸妹以須，宜靜待時機。', '六四：愆期，宜耐心以待。', '九五：帝乙歸妹，宜和睦行事。', '上六：女承筐無實，宜謙退守正。'] },
            '離上兌下': { name: '火澤睽', ci: '小事吉，宜謹慎求同，化解分歧。', yaoCi: ['初九：悔亡喪馬，宜坦然面對。', '九二：遇主於巷，宜真誠相交。', '六三：見輿曳，宜謹防阻礙。', '六四：睽孤遇元夫，宜結交賢才。', '九五：悔亡厥宗，宜團結共事。', '上九：睽孤見豕，宜謹防誤解。'] },
            '乾上兌下': { name: '天澤履', ci: '履虎尾，宜謹慎行事，守正無咎。', yaoCi: ['初九：素履往，宜謙慎起步。', '九二：履道坦坦，宜中正前行。', '六三：眇能視，宜謹慎行事。', '九四：履虎尾，宜審慎進退。', '九五：夬夬其正，宜果斷中正。', '上九：夬夬其正，宜果斷中正。'] }
        };

        const interpretations = {
            "WS,WS,WS": "初始吉利，過程中得到幫助，最終結果吉利。整體大吉。\n\n乾坤和合福運開，\n貴人相助路途寬，\n順天應人成大業，\n吉星高照夢圓滿",
            "WS,WS,WK": "初始吉利，過程中得到幫助，最終結果凶險。整體小吉。\n\n初陽普照福運生，\n貴人相助路途平，\n末遇風波需謹慎，\n守正持中化險情",
            "WS,WS,SS": "初始吉利，過程中得到幫助，最終付出多收穫少。整體小吉。\n\n春風送暖百花香，\n貴人相助事業昌，\n勞多收少天道定，\n積善修德福綿長",
            "WS,WS,SK": "初始吉利，過程中得到幫助，最終通過努力成功。整體大吉。\n\n初得吉祥福氣濃，\n貴人攜手路途通，\n自強不息終成業，\n鵬程萬里志高鴻",
            "WS,WS,BH": "初始吉利，過程中得到幫助，最終平穩。整體大吉。\n\n紫氣東來福滿堂，\n貴人相助保安康，\n平穩安泰終無憂，\n福壽綿延樂無疆",
            "WS,WK,WS": "初始吉利，過程中遇到阻礙，最終結果吉利。整體小吉。\n\n初陽升起福運新，\n中途坎坷試志真，\n否極泰來終獲吉，\n破繭成蝶展宏圖",
            "WS,WK,WK": "初始吉利，過程中遇到阻礙，最終結果凶險。整體小凶。\n\n初陽光輝福氣生，\n中逢暗礁路難行，\n末途多艱宜謹慎，\n韜光養晦待春情",
            "WS,WK,SS": "初始吉利，過程中遇到阻礙，最終付出多收穫少。整體小凶。\n\n初陽明媚福運開，\n中途風雨阻行懷，\n勞多收少天理在，\n厚德載物福綿延",
            "WS,WK,SK": "初始吉利，過程中遇到阻礙，最終通過努力成功。整體小吉。\n\n初吉光輝路坦然，\n中途險阻試心堅，\n自強不息終成業，\n鐵杵磨針志向前",
            "WS,WK,BH": "初始吉利，過程中遇到阻礙，最終平穩。整體小吉。\n\n初陽普照福運長，\n中途風霜志不傷，\n平穩安泰終無恙，\n以柔克剛壽安康",
            "WS,SS,WS": "初始吉利，過程中付出努力，最終結果吉利。整體小吉。\n\n初陽吉利福運生，\n中途勤奮志彌堅，\n碩果累累終獲吉，\n天道酬勤福綿延",
            "WS,SS,WK": "初始吉利，過程中付出努力，最終結果凶險。整體小凶。\n\n初吉福運啟新程，\n中途奮力志堅定，\n末路多艱宜慎行，\n韜光養晦待時清",
            "WS,SS,SS": "初始吉利，過程中付出努力，最終付出多收穫少。整體小凶。\n\n初陽光輝福運開，\n中途勞苦志不衰，\n收穫雖少天道在，\n知足常樂福自來",
            "WS,SS,SK": "初始吉利，過程中付出努力，最終通過努力成功。整體小吉。\n\n初吉福運開新篇，\n中途奮鬥志如磐，\n自強不息終成業，\n功成名就福壽全",
            "WS,SS,BH": "初始吉利，過程中付出努力，最終平穩。整體小吉。\n\n初陽吉利福運濃，\n中途勤勉志更宏，\n平穩安泰終無憂，\n知足常樂壽康寧",
            "WS,SK,WS": "初始吉利，過程中克服困難，最終結果吉利。整體大吉。\n\n初吉福運啟宏圖，\n披荊斬棘志不渝，\n終獲坦途成大業，\n勇智雙全名四方",
            "WS,SK,WK": "初始吉利，過程中克服困難，最終結果凶險。整體小吉。\n\n初陽吉利福運開，\n中途克難志不摧，\n末路艱辛宜慎行，\n守正不阿待春來",
            "WS,SK,SS": "初始吉利，過程中克服困難，最終付出多收穫少。整體小吉。\n\n初吉福運啟新程，\n中克險阻志堅定，\n勞多收少天理明，\n積少成多福自生",
            "WS,SK,SK": "初始吉利，過程中克服困難，最終通過努力成功。整體大吉。\n\n初吉福運開新篇，\n千錘百煉志彌堅，\n自強不息終成業，\n風雨過後彩虹妍",
            "WS,SK,BH": "初始吉利，過程中克服困難，最終平穩。整體大吉。\n\n初吉福運啟宏圖，\n中克艱難志不渝，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "WS,BH,WS": "初始吉利，過程平穩，最終結果吉利。整體大吉。\n\n初陽吉利福運長，\n中途平穩志安康，\n順水行舟終獲吉，\n福澤綿延萬事昌",
            "WS,BH,WK": "初始吉利，過程平穩，最終結果凶險。整體小吉。\n\n初陽吉利福運開，\n中途平穩路無涯，\n末路多艱需慎行，\n居安思危化險情",
            "WS,BH,SS": "初始吉利，過程平穩，最終付出多收穫少。整體小吉。\n\n初陽吉利福運生，\n中途平穩志安寧，\n勞多收少天道定，\n知足常樂福綿長",
            "WS,BH,SK": "初始吉利，過程平穩，最終通過努力成功。整體大吉。\n\n初吉福運啟新程，\n中途平穩志堅定，\n自強不息終成業，\n功成名就福壽全",
            "WS,BH,BH": "初始吉利，過程平穩，最終平穩。整體大吉。\n\n初陽吉利福運濃，\n中途平穩保安康，\n四平八穩終無憂，\n福壽綿延樂無疆",
            "WK,WS,WS": "初始凶險，過程中得到幫助，最終結果吉利。整體小吉。\n\n初逢凶險志不摧，\n貴人相助路重開，\n否極泰來終獲吉，\n雨過天晴虹滿天",
            "WK,WS,WK": "初始凶險，過程中得到幫助，最終結果凶險。整體小凶。\n\n初遇凶險路崎嶇，\n貴人相助暫解憂，\n末途多艱宜謹慎，\n韜光養晦待時清",
            "WK,WS,SS": "初始凶險，過程中得到幫助，最終付出多收穫少。整體小凶。\n\n初逢凶險志不移，\n貴人相助路亨通，\n勞多收少天道定，\n積善修德福自生",
            "WK,WS,SK": "初始凶險，過程中得到幫助，最終通過努力成功。整體小吉。\n\n初逢凶險路難行，\n貴人相助化險情，\n自強不息終成業，\n峰迴路轉柳暗明",
            "WK,WS,BH": "初始凶險，過程中得到幫助，最終平穩。整體小吉。\n\n初逢凶險心不驚，\n貴人相助渡難關，\n平穩安泰終無恙，\n守正持中福自來",
            "WK,WK,WS": "初始凶險，過程中遇到阻礙，最終結果吉利。整體小凶。\n\n初逢凶險路崎嶇，\n中途坎坷更艱辛，\n否極泰來終獲吉，\n磨礪心志得新生",
            "WK,WK,WK": "初始凶險，過程中遇到阻礙，最終結果凶險。整體大凶。\n\n初逢凶險志難伸，\n中途坎坷雪上霜，\n末途多難宜謹慎，\n退守自保待時辰",
            "WK,WK,SS": "初始凶險，過程中遇到阻礙，最終付出多收穫少。整體大凶。\n\n初逢凶險心多憂，\n中途坎坷事難成，\n勞多收少天道在，\n韜光養晦待春風",
            "WK,WK,SK": "初始凶險，過程中遇到阻礙，最終通過努力成功。整體小凶。\n\n初逢凶險路難行，\n中途坎坷試心堅，\n自強不息終成業，\n千錘百煉始成鋼",
            "WK,WK,BH": "初始凶險，過程中遇到阻礙，最終平穩。整體小凶。\n\n初逢凶險心多憂，\n中途坎坷志難酬，\n平穩安泰終無恙，\n守正持中保安康",
            "WK,SS,WS": "初始凶險，過程中付出努力，最終結果吉利。整體小凶。\n\n初逢凶險志不餒，\n中途勤奮志彌堅，\n否極泰來終獲吉，\n天道酬勤福自來",
            "WK,SS,WK": "初始凶險，過程中付出努力，最終結果凶險。整體大凶。\n\n初逢凶險心多憂，\n中途勞苦志不休，\n末路多艱宜慎行，\n退避三舍保平安",
            "WK,SS,SS": "初始凶險，過程中付出努力，最終付出多收穫少。整體大凶。\n\n初逢凶險路難行，\n中途勞碌事難成，\n勞多收少天理在，\n韜光養晦待時清",
            "WK,SS,SK": "初始凶險，過程中付出努力，最終通過努力成功。整體小凶。\n\n初逢凶險志不移，\n中途奮鬥勇前行，\n自強不息終成業，\n功成名就福壽全",
            "WK,SS,BH": "初始凶險，過程中付出努力，最終平穩。整體小凶。\n\n初逢凶險心不驚，\n中途勤勉志不休，\n平穩安泰終無憂，\n守正持中保安康",
            "WK,SK,WS": "初始凶險，過程中克服困難，最終結果吉利。整體小吉。\n\n初逢凶險路難行，\n中途克難志更堅，\n否極泰來終獲吉，\n風雨過後彩虹妍",
            "WK,SK,WK": "初始凶險，過程中克服困難，最終結果凶險。整體小凶。\n\n初逢凶險心不驚，\n中途克難志彌堅，\n末路艱辛宜慎行，\n韜光養晦待時清",
            "WK,SK,SS": "初始凶險，過程中克服困難，最終付出多收穫少。整體小凶。\n\n初逢凶險志不移，\n中途克難勇前行，\n勞多收少天道在，\n積少成多福自生",
            "WK,SK,SK": "初始凶險，過程中克服困難，最終通過努力成功。整體小吉。\n\n初逢凶險路崎嶇，\n千錘百煉始成器，\n自強不息終成業，\n功成名就福壽全",
            "WK,SK,BH": "初始凶險，過程中克服困難，最終平穩。整體小吉。\n\n初逢凶險心不憂，\n中途克難志不休，\n平穩安泰終無恙，\n陰陽平衡壽康寧",
            "WK,BH,WS": "初始凶險，過程平穩，最終結果吉利。整體小凶。\n\n初逢凶險心不驚，\n中途平穩路坦然，\n否極泰來終獲吉，\n守得雲開見月明",
            "WK,BH,WK": "初始凶險，過程平穩，最終結果凶險。整體大凶。\n\n初逢凶險心多憂，\n中途平穩志難酬，\n末路多艱宜慎行，\n退避三舍保平安",
            "WK,BH,SS": "初始凶險，過程平穩，最終付出多收穫少。整體大凶。\n\n初逢凶險志不移，\n中途平穩福漸稀，\n勞多收少天道在，\n知足常樂福自生",
            "WK,BH,SK": "初始凶險，過程平穩，最終通過努力成功。整體小凶。\n\n初逢凶險心不驚，\n中途平穩路坦然，\n自強不息終成業，\n功成名就福壽全",
            "WK,BH,BH": "初始凶險，過程平穩，最終平穩。整體小凶。\n\n初逢凶險心不憂，\n中途平穩志不休，\n平穩安泰終無恙，\n守正持中福自來",
            "SS,WS,WS": "初始付出多收穫少，過程中得到幫助，最終結果吉利。整體小吉。\n\n初遇阻礙志不移，\n貴人相助福自來，\n否極泰來終獲吉，\n天道酬勤福綿延",
            "SS,WS,WK": "初始付出多收穫少，過程中得到幫助，最終結果凶險。整體小凶。\n\n初遇阻礙志不移，\n貴人相助路亨通，\n末路多艱宜慎行，\n韜光養晦待時清",
            "SS,WS,SS": "初始付出多收穫少，過程中得到幫助，最終付出多收穫少。整體小凶。\n\n初遇阻礙志不移，\n貴人相助路坦然，\n勞多收少天道定，\n知足常樂福自來",
            "SS,WS,SK": "初始付出多收穫少，過程中得到幫助，最終通過努力成功。整體小吉。\n\n初遇阻礙志不移，\n貴人相助路坦然，\n自強不息終成業，\n功成名就福壽全",
            "SS,WS,BH": "初始付出多收穫少，過程中得到幫助，最終平穩。整體小吉。\n\n初遇阻礙志不移，\n貴人相助路坦然，\n平穩安泰終無憂，\n知足常樂福綿長",
            "SS,WK,WS": "初始付出多收穫少，過程中遇到阻礙，最終結果吉利。整體大凶。\n\n初遇阻礙心多憂，\n中途坎坷事難成，\n否極泰來終獲吉，\n磨礪心志得新生",
            "SS,WK,WK": "初始付出多收穫少，過程中遇到阻礙，最終結果凶險。整體大凶。\n\n初遇阻礙志不移，\n中途坎坷事難成，\n末路多艱宜慎行，\n退避三舍保平安",
            "SS,WK,SS": "初始付出多收穫少，過程中遇到阻礙，最終付出多收穫少。整體大凶。\n\n初遇阻礙心多憂，\n中途坎坷事難成，\n勞多收少天道在，\n韜光養晦待時清",
            "SS,WK,SK": "初始付出多收穫少，過程中遇到阻礙，最終通過努力成功。整體大凶。\n\n初遇阻礙志不移，\n中途坎坷事難成，\n自強不息終成業，\n千錘百煉始成鋼",
            "SS,WK,BH": "初始付出多收穫少，過程中遇到阻礙，最終平穩。整體大凶。\n\n初遇阻礙心多憂，\n中途坎坷事難成，\n平穩安泰終無憂，\n知足常樂福自來",
            "SS,SS,WS": "初始付出多收穫少，過程中付出努力，最終結果吉利。整體小凶。\n\n初遇阻礙心不憂，\n中途勤勉志不休，\n否極泰來終獲吉，\n天道酬勤福自來",
            "SS,SS,WK": "初始付出多收穫少，過程中付出努力，最終結果凶險。整體大凶。\n\n初遇阻礙心多憂，\n中途勤勉事難成，\n末路多艱宜慎行，\n退避三舍保平安",
            "SS,SS,SS": "初始付出多收穫少，過程中付出努力，最終付出多收穫少。整體大凶。\n\n初遇阻礙志不移，\n中途勞碌事難成，\n勞多收少天道在，\n韜光養晦待時清",
            "SS,SS,SK": "初始付出多收穫少，過程中付出努力，最終通過努力成功。整體小凶。\n\n初遇阻礙志不移，\n中途勤勉勇前行，\n自強不息終成業，\n功成名就福壽全",
            "SS,SS,BH": "初始付出多收穫少，過程中付出努力，最終平穩。整體小凶。\n\n初遇阻礙心不憂，\n中途勤勉志不休，\n平穩安泰終無憂，\n知足常樂福自來",
            "SS,SK,WS": "初始付出多收穫少，過程中克服困難，最終結果吉利。整體小吉。\n\n初遇阻礙志不移，\n中途克難勇前行，\n否極泰來終獲吉，\n風雨過後彩虹妍",
            "SS,SK,WK": "初始付出多收穫少，過程中克服困難，最終結果凶險。整體小凶。\n\n初遇阻礙心多憂，\n中途克難志彌堅，\n末路多艱宜慎行，\n退避三舍保平安",
            "SS,SK,SS": "初始付出多收穫少，過程中克服困難，最終付出多收穫少。整體小凶。\n\n初遇阻礙志不移，\n中途克難勇前行，\n勞多收少天道在，\n積少成多福自生",
            "SS,SK,SK": "初始付出多收穫少，過程中克服困難，最終通過努力成功。整體小吉。\n\n初遇阻礙志不移，\n中途克難勇前行，\n自強不息終成業，\n功成名就福壽全",
            "SS,SK,BH": "初始付出多收穫少，過程中克服困難，最終平穩。整體小吉。\n\n初遇阻礙心不憂，\n中途克難志不休，\n平穩安泰終無恙，\n陰陽平衡壽康寧",
            "SS,BH,WS": "初始付出多收穫少，過程平穩，最終結果吉利。整體小凶。\n\n初遇阻礙志不移，\n中途平穩福自來，\n否極泰來終獲吉，\n守得雲開見月明",
            "SS,BH,WK": "初始付出多收穫少，過程平穩，最終結果凶險。整體大凶。\n\n初遇阻礙心多憂，\n中途平穩志難酬，\n末路多艱宜慎行，\n退避三舍保平安",
            "SS,BH,SS": "初始付出多收穫少，過程平穩，最終付出多收穫少。整體大凶。\n\n初遇阻礙志不移，\n中途平穩福漸稀，\n勞多收少天道在，\n知足常樂福自生",
            "SS,BH,SK": "初始付出多收穫少，過程平穩，最終通過努力成功。整體小凶。\n\n初遇阻礙志不移，\n中途平穩路坦然，\n自強不息終成業，\n功成名就福壽全",
            "SS,BH,BH": "初始付出多收穫少，過程平穩，最終平穩。整體小凶。\n\n初遇阻礙志不移，\n中途平穩福自來，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "SK,WS,WS": "初始通過努力成功，過程中得到幫助，最終結果吉利。整體大吉。\n\n初經磨礪志彌堅，\n貴人相助福自來，\n順水行舟終獲吉，\n功成名就福壽全",
            "SK,WS,WK": "初始通過努力成功，過程中得到幫助，最終結果凶險。整體小吉。\n\n初經磨礪志不移，\n貴人相助路坦然，\n末路多艱宜慎行，\n退避三舍保平安",
            "SK,WS,SS": "初始通過努力成功，過程中得到幫助，最終付出多收穫少。整體小吉。\n\n初經磨礪志彌堅，\n貴人相助福自來，\n勞多收少天道在，\n積少成多福自生",
            "SK,WS,SK": "初始通過努力成功，過程中得到幫助，最終通過努力成功。整體大吉。\n\n初經磨礪志彌堅，\n貴人相助路亨通，\n自強不息終成業，\n風雨過後彩虹妍",
            "SK,WS,BH": "初始通過努力成功，過程中得到幫助，最終平穩。整體大吉。\n\n初經磨礪志彌堅，\n貴人相助福自來，\n平穩安泰終無憂，\n知足常樂福綿長",
            "SK,WK,WS": "初始通過努力成功，過程中遇到阻礙，最終結果吉利。整體小吉。\n\n初經磨礪志不移，\n中途坎坷路難行，\n否極泰來終獲吉，\n磨礪心志得新生",
            "SK,WK,WK": "初始通過努力成功，過程中遇到阻礙，最終結果凶險。整體小凶。\n\n初經磨礪志不移，\n中途坎坷路難行，\n末路多艱宜慎行，\n韜光養晦待時清",
            "SK,WK,SS": "初始通過努力成功，過程中遇到阻礙，最終付出多收穫少。整體小凶。\n\n初經磨礪志不移，\n中途坎坷事難成，\n勞多收少天道在，\n知足常樂福自來",
            "SK,WK,SK": "初始通過努力成功，過程中遇到阻礙，最終通過努力成功。整體小吉。\n\n初經磨礪志不移，\n中途坎坷路難行，\n自強不息終成業，\n功成名就福壽全",
            "SK,WK,BH": "初始通過努力成功，過程中遇到阻礙，最終平穩。整體小吉。\n\n初經磨礪志不移，\n中途坎坷路難行，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "SK,SS,WS": "初始通過努力成功，過程中付出努力，最終結果吉利。整體小吉。\n\n初經磨礪志不移，\n中途勤奮勇前行，\n否極泰來終獲吉，\n天道酬勤福自來",
            "SK,SS,WK": "初始通過努力成功，過程中付出努力，最終結果凶險。整體小凶。\n\n初經磨礪志不移，\n中途勤勉事難成，\n末路多艱宜慎行，\n退避三舍保平安",
            "SK,SS,SS": "初始通過努力成功，過程中付出努力，最終付出多收穫少。整體小凶。\n\n初經磨礪志不移，\n中途勞碌事難成，\n勞多收少天道在，\n韜光養晦待時清",
            "SK,SS,SK": "初始通過努力成功，過程中付出努力，最終通過努力成功。整體小吉。\n\n初經磨礪志不移，\n中途勤勉勇前行，\n自強不息終成業，\n功成名就福壽全",
            "SK,SS,BH": "初始通過努力成功，過程中付出努力，最終平穩。整體小吉。\n\n初經磨礪志不移，\n中途勤勉志不休，\n平穩安泰終無憂，\n知足常樂福自來",
            "SK,SK,WS": "初始通過努力成功，過程中克服困難，最終結果吉利。整體大吉。\n\n初經磨礪志不移，\n中途克難勇前行，\n否極泰來終獲吉，\n風雨過後彩虹妍",
            "SK,SK,WK": "初始通過努力成功，過程中克服困難，最終結果凶險。整體小吉。\n\n初經磨礪志不移，\n中途克難勇前行，\n末路多艱宜慎行，\n退避三舍保平安",
            "SK,SK,SS": "初始通過努力成功，過程中克服困難，最終付出多收穫少。整體小吉。\n\n初經磨礪志不移，\n中途克難勇前行，\n勞多收少天道在，\n積少成多福自生",
            "SK,SK,SK": "初始通過努力成功，過程中克服困難，最終通過努力成功。整體大吉。\n\n初經磨礪志不移，\n中途克難勇前行，\n自強不息終成業，\n功成名就福壽全",
            "SK,SK,BH": "初始通過努力成功，過程中克服困難，最終平穩。整體大吉。\n\n初經磨礪志不移，\n中途克難勇前行，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "SK,BH,WS": "初始通過努力成功，過程平穩，最終結果吉利。整體小吉。\n\n初經磨礪志不移，\n中途平穩路坦然，\n否極泰來終獲吉，\n守得雲開見月明",
            "SK,BH,WK": "初始通過努力成功，過程平穩，最終結果凶險。整體小凶。\n\n初經磨礪志不移，\n中途平穩路坦然，\n末路多艱宜慎行，\n退避三舍保平安",
            "SK,BH,SS": "初始通過努力成功，過程平穩，最終付出多收穫少。整體小凶。\n\n初經磨礪志不移，\n中途平穩福自來，\n勞多收少天道在，\n知足常樂福自生",
            "SK,BH,SK": "初始通過努力成功，過程平穩，最終通過努力成功。整體小吉。\n\n初經磨礪志不移，\n中途平穩路坦然，\n自強不息終成業，\n功成名就福壽全",
            "SK,BH,BH": "初始通過努力成功，過程平穩，最終平穩。整體小吉。\n\n初經磨礪志不移，\n中途平穩路坦然，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "BH,WS,WS": "初始平穩，過程中得到幫助，最終結果吉利。整體大吉。\n\n初行安泰路坦然，\n貴人相助福自來，\n順水行舟終獲吉，\n功成名就福壽全",
            "BH,WS,WK": "初始平穩，過程中得到幫助，最終結果凶險。整體小吉。\n\n初行安泰路坦然，\n貴人相助福自來，\n末路多艱宜慎行，\n退避三舍保平安",
            "BH,WS,SS": "初始平穩，過程中得到幫助，最終付出多收穫少。整體小吉。\n\n初行安泰路坦然，\n貴人相助福自來，\n勞多收少天道在，\n知足常樂福自來",
            "BH,WS,SK": "初始平穩，過程中得到幫助，最終通過努力成功。整體大吉。\n\n初行安泰路坦然，\n貴人相助福自來，\n自強不息終成業，\n功成名就福壽全",
            "BH,WS,BH": "初始平穩，過程中得到幫助，最終平穩。整體大吉。\n\n初行安泰路坦然，\n貴人相助福自來，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "BH,WK,WS": "初始平穩，過程中遇到阻礙，最終結果吉利。整體小吉。\n\n初行安泰路坦然，\n中途坎坷路難行，\n否極泰來終獲吉，\n磨礪心志得新生",
            "BH,WK,WK": "初始平穩，過程中遇到阻礙，最終結果凶險。整體大凶。\n\n初行安泰路坦然，\n中途坎坷路難行，\n末路多艱宜慎行，\n退避三舍保平安",
            "BH,WK,SS": "初始平穩，過程中遇到阻礙，最終付出多收穫少。整體大凶。\n\n初行安泰路坦然，\n中途坎坷路難行，\n勞多收少天道在，\n知足常樂福自來",
            "BH,WK,SK": "初始平穩，過程中遇到阻礙，最終通過努力成功。整體小吉。\n\n初行安泰路坦然，\n中途坎坷路難行，\n自強不息終成業，\n功成名就福壽全",
            "BH,WK,BH": "初始平穩，過程中遇到阻礙，最終平穩。整體小吉。\n\n初行安泰路坦然，\n中途坎坷路難行，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "BH,SS,WS": "初始平穩，過程中付出努力，最終結果吉利。整體小吉。\n\n初行安泰路坦然，\n中途勤勉勇前行，\n否極泰來終獲吉，\n天道酬勤福自來",
            "BH,SS,WK": "初始平穩，過程中付出努力，最終結果凶險。整體小凶。\n\n初行安泰路坦然，\n中途勤勉事難成，\n末路多艱宜慎行，\n退避三舍保平安",
            "BH,SS,SS": "初始平穩，過程中付出努力，最終付出多收穫少。整體小凶。\n\n初行安泰路坦然，\n中途勞碌事難成，\n勞多收少天道在，\n知足常樂福自來",
            "BH,SS,SK": "初始平穩，過程中付出努力，最終通過努力成功。整體小吉。\n\n初行安泰路坦然，\n中途勤勉勇前行，\n自強不息終成業，\n功成名就福壽全",
            "BH,SS,BH": "初始平穩，過程中付出努力，最終平穩。整體小吉。\n\n初行安泰路坦然，\n中途勤勉志不休，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "BH,SK,WS": "初始平穩，過程中克服困難，最終結果吉利。整體大吉。\n\n初行安泰路坦然，\n中途克難勇前行，\n否極泰來終獲吉，\n風雨過後彩虹妍",
            "BH,SK,WK": "初始平穩，過程中克服困難，最終結果凶險。整體小吉。\n\n初行安泰路坦然，\n中途克難勇前行，\n末路多艱宜慎行，\n退避三舍保平安",
            "BH,SK,SS": "初始平穩，過程中克服困難，最終付出多收穫少。整體小吉。\n\n初行安泰路坦然，\n中途克難勇前行，\n勞多收少天道在，\n知足常樂福自生",
            "BH,SK,SK": "初始平穩，過程中克服困難，最終通過努力成功。整體大吉。\n\n初行安泰路坦然，\n中途克難勇前行，\n自強不息終成業，\n功成名就福壽全",
            "BH,SK,BH": "初始平穩，過程中克服困難，最終平穩。整體大吉。\n\n初行安泰路坦然，\n中途克難勇前行，\n平穩安泰終無憂，\n陰陽平衡壽康寧",
            "BH,BH,WS": "初始平穩，過程平穩，最終結果吉利。整體大吉。\n\n初行安泰路坦然，\n中途平穩志不移，\n順水行舟終獲吉，\n功成名就福壽全",
            "BH,BH,WK": "初始平穩，過程平穩，最終結果凶險。整體小吉。\n\n初行安泰路坦然，\n中途平穩志不移，\n末路多艱宜慎行，\n退避三舍保平安",
            "BH,BH,SS": "初始平穩，過程平穩，最終付出多收穫少。整體小吉。\n\n初行安泰路坦然，\n中途平穩福自來，\n勞多收少天道在，\n知足常樂福自生",
            "BH,BH,SK": "初始平穩，過程平穩，最終通過努力成功。整體大吉。\n\n初行安泰路坦然，\n中途平穩志不移，\n自強不息終成業，\n功成名就福壽全",
            "BH,BH,BH": "初始平穩，過程平穩，最終平穩。整體大吉。\n\n初行安泰路坦然，\n中途平穩志不移，\n平穩安泰終無憂，\n陰陽平衡壽康寧"
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.method-tab');
            const calculateBtn = document.getElementById('calculate-btn');
            const randomBtn = document.getElementById('random-btn');
            const useCurrentTimeBtn = document.getElementById('use-current-time');
            const showHistoryBtn = document.getElementById('show-history-btn');
            const clearHistoryBtn = document.getElementById('clear-history-btn');
            const historySection = document.getElementById('history-section');
            const resultDiv = document.getElementById('result');
            const resultLoading = document.getElementById('result-loading');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
                });
            });
            
            useCurrentTimeBtn.addEventListener('click', () => {
                const now = new Date();
                document.getElementById('year').value = now.getFullYear();
                document.getElementById('month').value = now.getMonth() + 1;
                document.getElementById('day').value = now.getDate();
                document.getElementById('hour').value = now.getHours();
            });
            
            calculateBtn.addEventListener('click', calculateDivination);
            randomBtn.addEventListener('click', generateRandomDivination);
            showHistoryBtn.addEventListener('click', toggleHistory);
            clearHistoryBtn.addEventListener('click', clearHistory);
            
            function toggleHistory() {
                if (historySection.classList.contains('hidden')) {
                    historySection.classList.remove('hidden');
                    resultDiv.style.display = 'none';
                    resultLoading.style.display = 'none';
                    loadHistory();
                    showHistoryBtn.textContent = '隱藏歷史紀錄';
                } else {
                    historySection.classList.add('hidden');
                    resultLoading.style.display = 'block';
                    resultDiv.style.display = 'none';
                    showHistoryBtn.textContent = '查看歷史紀錄';
                }
            }
            
            function calculateDivination() {
                const activeTab = document.querySelector('.method-tab.active').id;
                let shangGua, xiaGua, movingYao;
                
                if (activeTab === 'direct-tab') {
                    shangGua = parseInt(document.getElementById('shang-gua').value);
                    xiaGua = parseInt(document.getElementById('xia-gua').value);
                    movingYao = parseInt(document.getElementById('moving-yao').value);
                } else if (activeTab === 'time-tab') {
                    const year = parseInt(document.getElementById('year').value);
                    const month = parseInt(document.getElementById('month').value);
                    const day = parseInt(document.getElementById('day').value);
                    const hour = parseInt(document.getElementById('hour').value);
                    shangGua = (year + month + day) % 8;
                    xiaGua = (year + month + day + hour) % 8;
                    movingYao = (year + month + day + hour) % 6;
                    
                    if (shangGua === 0) shangGua = 8;
                    if (xiaGua === 0) xiaGua = 8;
                    if (movingYao === 0) movingYao = 6;
                } else if (activeTab === 'number-tab') {
                    const num1 = parseInt(document.getElementById('number1').value);
                    const num2 = parseInt(document.getElementById('number2').value);
                    const num3 = parseInt(document.getElementById('number3').value);
                    shangGua = num1 % 8;
                    xiaGua = num2 % 8;
                    movingYao = num3 % 6;
                    
                    if (shangGua === 0) shangGua = 8;
                    if (xiaGua === 0) xiaGua = 8;
                    if (movingYao === 0) movingYao = 6;
                }
                
                showLoading();
                setTimeout(() => {
                    const benGua = guaTable[shangGua].name + '上' + guaTable[xiaGua].name + '下';
                    
                    const benBinary = guaBinary[shangGua - 1] + guaBinary[xiaGua - 1];
                    let bianBinary = benBinary.split('');
                    const movingYaoIndex = 6 - movingYao;
                    bianBinary[movingYaoIndex] = (bianBinary[movingYaoIndex] === '1') ? '0' : '1';
                    bianBinary = bianBinary.join('');
                    
                    const shangBianIndex = parseInt(bianBinary.substring(0, 3), 2);
                    const xiaBianIndex = parseInt(bianBinary.substring(3, 6), 2);
                    const shangBianGua = guaNames[shangBianIndex];
                    const xiaBianGua = guaNames[xiaBianIndex];
                    const bianGua = shangBianGua + '上' + xiaBianGua + '下';
                    
                    const huBinaryUpper = benBinary.substring(1, 4);
                    const huBinaryLower = benBinary.substring(2, 5);
                    const shangHuIndex = parseInt(huBinaryUpper, 2);
                    const xiaHuIndex = parseInt(huBinaryLower, 2);
                    const shangHuGua = guaNames[shangHuIndex];
                    const xiaHuGua = guaNames[xiaHuIndex];
                    const huGua = shangHuGua + '上' + xiaHuGua + '下';
                    
                    const benGuaObj = guaTable[shangGua];
                    const benGuaElement = guaTable[xiaGua];
                    const huGuaObj = { name: shangHuGua + xiaHuGua, fiveElement: getGuaFiveElement(shangHuGua) + getGuaFiveElement(xiaHuGua) };
                    const bianGuaObj = { name: shangBianGua + xiaBianGua, fiveElement: getGuaFiveElement(shangBianGua) + getGuaFiveElement(xiaBianGua) };
                    
                    const resultText = getInterpretation(benGuaObj.fiveElement, benGuaElement.fiveElement, huGuaObj.fiveElement, bianGuaObj.fiveElement);
                    
                    document.getElementById('ben-gua').textContent = guaTable[shangGua].name + '上' + guaTable[xiaGua].name + '下';
                    document.getElementById('hu-gua').textContent = shangHuGua + '上' + xiaHuGua + '下';
                    document.getElementById('bian-gua').textContent = shangBianGua + '上' + xiaBianGua + '下';
                    document.getElementById('interpretation').textContent = resultText;
                    
                    drawHexagram('mainHexagram', benBinary, movingYao);
                    drawHexagram('mutualHexagram', huBinaryUpper + huBinaryLower, 0);
                    drawHexagram('changedHexagram', bianBinary, 0);
                    
                    displayDeepInterpretation(benGua, benGua, huGua, bianGua, movingYao);
                    displayFiveElementTable(shangGua, xiaGua, shangHuGua, xiaHuGua, shangBianGua, xiaBianGua, movingYao);
                    
                    resultDiv.style.display = 'block';
                    saveHistory({
                        date: new Date().toLocaleString(),
                        benGua: guaTable[shangGua].name + guaTable[xiaGua].name,
                        huGua: shangHuGua + xiaHuGua,
                        bianGua: shangBianGua + xiaBianGua,
                        movingYao: movingYao
                    });
                }, 800);
            }
            
            function getInterpretation(shangGuaElement, xiaGuaElement, huGuaElement, bianGuaElement) {
                const benRelation = getRelation(shangGuaElement, xiaGuaElement);
                const huRelation = getRelation(shangGuaElement, huGuaElement.substring(0,1)) + getRelation(xiaGuaElement, huGuaElement.substring(1,2));
                const bianRelation = getRelation(shangGuaElement, bianGuaElement.substring(0,1)) + getRelation(xiaGuaElement, bianGuaElement.substring(1,2));
                
                const key = `${benRelation},${huRelation},${bianRelation}`;
                return interpretations[key] || '無法解析此組合';
            }
            
            function getRelation(g1, g2) {
                if (g1 === g2) return 'BH';
                if (fiveElementRelations[g1].generates === g2) return 'WS';
                if (fiveElementRelations[g1].overcomes === g2) return 'WK';
                if (fiveElementRelations[g1].generatedBy === g2) return 'SS';
                if (fiveElementRelations[g1].overcomeBy === g2) return 'SK';
                return 'UNKNOWN';
            }
            
            function getGuaFiveElement(guaName) {
                const index = guaNames.indexOf(guaName);
                return fiveElements[index];
            }
            
            function generateRandomDivination() {
                const activeTab = document.querySelector('.method-tab.active').id;
                
                if (activeTab === 'direct-tab') {
                    document.getElementById('shang-gua').value = Math.floor(Math.random() * 8) + 1;
                    document.getElementById('xia-gua').value = Math.floor(Math.random() * 8) + 1;
                    document.getElementById('moving-yao').value = Math.floor(Math.random() * 6) + 1;
                } else if (activeTab === 'time-tab') {
                    const now = new Date();
                    document.getElementById('year').value = now.getFullYear();
                    document.getElementById('month').value = now.getMonth() + 1;
                    document.getElementById('day').value = now.getDate();
                    document.getElementById('hour').value = now.getHours();
                } else if (activeTab === 'number-tab') {
                    document.getElementById('number1').value = Math.floor(Math.random() * 999) + 1;
                    document.getElementById('number2').value = Math.floor(Math.random() * 999) + 1;
                    document.getElementById('number3').value = Math.floor(Math.random() * 6) + 1;
                }
                
                calculateDivination();
            }
            
            function showLoading() {
                resultLoading.style.display = 'block';
                resultDiv.style.display = 'none';
            }

            // gua.html functions
            function drawHexagram(elementId, binaryString, movingYao) {
                const element = document.getElementById(elementId);
                element.innerHTML = '';
                for (let i = 0; i < 6; i++) {
                    const lineDiv = document.createElement('div');
                    lineDiv.classList.add('hexagram-line');
                    const lineIndex = 5 - i;
                    if (binaryString[lineIndex] === '0') {
                        lineDiv.classList.add('yin-line');
                    }
                    if (movingYao && movingYao === i + 1) {
                        const dot = document.createElement('span');
                        dot.classList.add('moving-dot');
                        lineDiv.appendChild(dot);
                    }
                    element.appendChild(lineDiv);
                }
            }

            function displayDeepInterpretation(benGua, huGua, bianGua, benGuaString, movingYao) {
                const guaCi = guaCiData[benGuaString];
                if (guaCi) {
                    document.getElementById('guaCi').innerHTML = `<h3>${guaCi.name} - 卦辭：</h3><p>${guaCi.ci}</p>`;
                    const movingYaoText = guaCi.yaoCi[movingYao - 1];
                    document.getElementById('movingYao').innerHTML = `<h3>動爻分析：</h3><p>動爻為第 ${movingYao} 爻，${movingYaoText}</p>`;
                }

                const mainFiveElement = getGuaFiveElement(guaNames[(Number(benGua.substring(0, 1)) - 1)]);
                const changingFiveElement = getGuaFiveElement(guaNames[(Number(bianGua.substring(0, 1)) - 1)]);
                
                document.getElementById('fiveElements').innerHTML = `<h3>五行生克詳解：</h3><p>本卦屬 ${mainFiveElement}，變卦屬 ${changingFiveElement}，${getRelationText(mainFiveElement, changingFiveElement)}</p>`;
                document.getElementById('seasonalAnalysis').innerHTML = `<h3>旺相休囚死分析：</h3><p>本卦五行${mainFiveElement}，當前季節${seasons[mainFiveElement]}時最旺。判斷吉凶需結合占卜日期。</p>`;
                document.getElementById('guaCombination').innerHTML = `<h3>卦象組合：</h3><p>${guaImages[guaNames[(Number(benGua.substring(0, 1)) - 1)]]} - ${guaImages[guaNames[(Number(benGua.substring(2, 3)) - 1)]]}</p>`;
                document.getElementById('application').innerHTML = `<h3>應事範圍：</h3><p>此卦象對應於...（此處需根據卦象組合進一步解析）</p>`;
                document.getElementById('suggestion').innerHTML = `<h3>處世之道：</h3><p>根據卦象的特性，建議...（此處需根據卦象組合進一步解析）</p>`;
                document.getElementById('prediction').innerHTML = `<h3>應期分析：</h3><p>應期可參考動爻所屬五行與當前流年、月、日的關係，例如 ${getRelationText(mainFiveElement, fiveElements[getGuaIndexFromDate()])}...</p>`;
            }

            function getRelationText(el1, el2) {
                if (el1 === el2) return `比和（平）`;
                if (fiveElementRelations[el1].generates === el2) return `我生（泄）`;
                if (fiveElementRelations[el1].overcomes === el2) return `我剋（耗）`;
                if (fiveElementRelations[el1].generatedBy === el2) return `生我（吉）`;
                if (fiveElementRelations[el1].overcomeBy === el2) return `剋我（凶）`;
                return '無關係';
            }

            function displayFiveElementTable(shangGua, xiaGua, shangHuGua, xiaHuGua, shangBianGua, xiaBianGua, movingYao) {
                const tableBody = document.getElementById('fiveElementTable');
                tableBody.innerHTML = '';
                
                const guaData = [
                    { name: `本卦上卦 (${guaNames[shangGua - 1]})`, element: fiveElements[shangGua - 1] },
                    { name: `本卦下卦 (${guaNames[xiaGua - 1]})`, element: fiveElements[xiaGua - 1] },
                    { name: `互卦上卦 (${shangHuGua})`, element: getGuaFiveElement(shangHuGua) },
                    { name: `互卦下卦 (${xiaHuGua})`, element: getGuaFiveElement(xiaHuGua) },
                    { name: `變卦上卦 (${shangBianGua})`, element: getGuaFiveElement(shangBianGua) },
                    { name: `變卦下卦 (${xiaBianGua})`, element: getGuaFiveElement(xiaBianGua) }
                ];
                
                const mainGuaElement = fiveElements[shangGua - 1];
                
                guaData.forEach(data => {
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = data.name;
                    row.insertCell(1).textContent = data.element;
                    row.insertCell(2).textContent = getRelationText(mainGuaElement, data.element);
                    row.insertCell(3).textContent = getJudgement(mainGuaElement, data.element);
                    row.insertCell(4).textContent = '需結合日、時判斷';
                });
            }

            function getJudgement(mainElement, element) {
                if (fiveElementRelations[mainElement].generatedBy === element || fiveElementRelations[mainElement].generates === element) return '吉';
                if (fiveElementRelations[mainElement].overcomeBy === element || fiveElementRelations[mainElement].overcomes === element) return '凶';
                return '平';
            }
            
            function getGuaIndexFromDate() {
                const now = new Date();
                const year = now.getFullYear();
                const month = now.getMonth() + 1;
                const day = now.getDate();
                const hour = now.getHours();
                return (year + month + day + hour) % 8;
            }

            // History Functions
            function saveHistory(result) {
                let history = JSON.parse(localStorage.getItem('hexagramHistory')) || [];
                history.unshift(result);
                localStorage.setItem('hexagramHistory', JSON.stringify(history));
            }

            function loadHistory() {
                const historyList = document.getElementById('historyList');
                historyList.innerHTML = '';
                const history = JSON.parse(localStorage.getItem('hexagramHistory')) || [];

                if (history.length === 0) {
                    historyList.innerHTML = '<p style="text-align:center;">無卜卦歷史</p>';
                    return;
                }

                history.forEach(item => {
                    const listItem = document.createElement('div');
                    listItem.classList.add('history-item');
                    listItem.innerHTML = `<p><strong>時間：</strong>${item.date}</p>
                                          <p><strong>本卦：</strong>${item.benGua} <strong>變卦：</strong>${item.bianGua} <strong>動爻：</strong>${item.movingYao}</p>`;
                    listItem.addEventListener('click', () => {
                        // TODO: Re-display historical result
                    });
                    historyList.appendChild(listItem);
                });
            }

            function clearHistory() {
                localStorage.removeItem('hexagramHistory');
                loadHistory();
            }
        });
    </script>
</body>
</html>
